import{S as G,i as K,s as Q,k as $,a as D,l as E,m as y,c as V,h as d,n as g,b as S,G as _,f as q,g as X,t as P,d as Z,q as B,r as L,I as ee,u as H,e as ie,w as R,x as F,y as J,z as M,J as re,K as Ce,o as Be,B as C,L as ae,H as Le,p as ue}from"../../chunks/index-6dd5f773.js";import{w as Re}from"../../chunks/index-c217544c.js";const _e={check:"/api/__yao/app/check",setup:"/api/__yao/app/setup"},he={YAO_LANG:{name:"语言",value:["中文","English"]},YAO_ENV:{name:"启动模式",value:["开发模式(推荐)","生产模式"]},YAO_PORT:{name:"监听端口",value:"number",default:5099},YAO_STUDIO_PORT:{name:"Studio 端口",value:"number",default:5077}},me={type:{name:"数据库类型",value:["sqlite","mysql"]}},ve={sqlite:{file:{name:"数据库文件地址",value:"string",default:"db/yao.db"}},mysql:{db:{name:"数据库名称",value:"string",default:"yao"},hosts:{name:"Mysql服务设置",value:{host:{name:"服务地址",value:"string",default:"127.0.0.1"},port:{name:"服务端口",value:"number",default:3306},user:{name:"用户名",value:"string",default:"root"},pass:{name:"密码",value:"password"}}}}},x=Re(1),se=s=>{const e={},l=new FormData(s);return l.forEach((n,t)=>{e[t]||(e[t]=l.getAll(t).length>1?l.getAll(t):l.get(t))}),e};function de(s,e,l){const n=s.slice();return n[4]=e[l][0],n[5]=e[l][1],n}function pe(s,e,l){const n=s.slice();return n[4]=e[l][0],n[5]=e[l][1],n}function ge(s,e,l){const n=s.slice();return n[5]=e[l],n}function be(s){let e,l,n;return{c(){e=$("input"),this.h()},l(t){e=E(t,"INPUT",{class:!0,name:!0,type:!0,maxlength:!0,placeholder:!0}),this.h()},h(){g(e,"class","w_100 svelte-1xmjqyn"),g(e,"name",l=s[3]?s[3]+"."+s[0]:s[0]),g(e,"type","text"),g(e,"maxlength","60"),g(e,"placeholder","请输入string类型的值"),e.value=n=s[2]?s[2]:"",e.required=!0},m(t,o){S(t,e,o)},p(t,o){o&9&&l!==(l=t[3]?t[3]+"."+t[0]:t[0])&&g(e,"name",l),o&4&&n!==(n=t[2]?t[2]:"")&&e.value!==n&&(e.value=n)},d(t){t&&d(e)}}}function $e(s){let e,l,n;return{c(){e=$("input"),this.h()},l(t){e=E(t,"INPUT",{class:!0,name:!0,type:!0,maxlength:!0,placeholder:!0}),this.h()},h(){g(e,"class","w_100 svelte-1xmjqyn"),g(e,"name",l=s[3]?s[3]+"."+s[0]:s[0]),g(e,"type","password"),g(e,"maxlength","60"),g(e,"placeholder","请输入数据库密码"),e.value=n=s[2]?s[2]:"",e.required=!0},m(t,o){S(t,e,o)},p(t,o){o&9&&l!==(l=t[3]?t[3]+"."+t[0]:t[0])&&g(e,"name",l),o&4&&n!==(n=t[2]?t[2]:"")&&e.value!==n&&(e.value=n)},d(t){t&&d(e)}}}function Ee(s){let e,l,n;return{c(){e=$("input"),this.h()},l(t){e=E(t,"INPUT",{class:!0,name:!0,type:!0,max:!0,placeholder:!0}),this.h()},h(){g(e,"class","w_100 svelte-1xmjqyn"),g(e,"name",l=s[3]?s[3]+"."+s[0]:s[0]),g(e,"type","number"),g(e,"max","65535"),g(e,"placeholder","请输入number类型的值"),e.value=n=s[2]?s[2]:0,e.required=!0},m(t,o){S(t,e,o)},p(t,o){o&9&&l!==(l=t[3]?t[3]+"."+t[0]:t[0])&&g(e,"name",l),o&4&&n!==(n=t[2]?t[2]:0)&&e.value!==n&&(e.value=n)},d(t){t&&d(e)}}}function ye(s){let e,l,n,t,o,r;return{c(){e=$("select"),l=$("option"),n=B("true"),t=$("option"),o=B("false"),this.h()},l(a){e=E(a,"SELECT",{class:!0,name:!0});var f=y(e);l=E(f,"OPTION",{});var b=y(l);n=L(b,"true"),b.forEach(d),t=E(f,"OPTION",{});var p=y(t);o=L(p,"false"),p.forEach(d),f.forEach(d),this.h()},h(){l.__value="true",l.value=l.__value,t.__value="false",t.value=t.__value,g(e,"class","w_100 svelte-1xmjqyn"),g(e,"name",r=s[3]?s[3]+"."+s[0]:s[0]),e.required=!0},m(a,f){S(a,e,f),_(e,l),_(l,n),_(e,t),_(t,o)},p(a,f){f&9&&r!==(r=a[3]?a[3]+"."+a[0]:a[0])&&g(e,"name",r)},d(a){a&&d(e)}}}function we(s){let e,l,n=s[1],t=[];for(let o=0;o<n.length;o+=1)t[o]=ke(ge(s,n,o));return{c(){e=$("select");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=E(o,"SELECT",{class:!0,name:!0});var r=y(e);for(let a=0;a<t.length;a+=1)t[a].l(r);r.forEach(d),this.h()},h(){g(e,"class","w_100 svelte-1xmjqyn"),g(e,"name",l=s[3]?s[3]+"."+s[0]:s[0]),e.required=!0},m(o,r){S(o,e,r);for(let a=0;a<t.length;a+=1)t[a].m(e,null)},p(o,r){if(r&2){n=o[1];let a;for(a=0;a<n.length;a+=1){const f=ge(o,n,a);t[a]?t[a].p(f,r):(t[a]=ke(f),t[a].c(),t[a].m(e,null))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}r&9&&l!==(l=o[3]?o[3]+"."+o[0]:o[0])&&g(e,"name",l)},d(o){o&&d(e),ee(t,o)}}}function ke(s){let e,l=s[5]+"",n,t;return{c(){e=$("option"),n=B(l),this.h()},l(o){e=E(o,"OPTION",{});var r=y(e);n=L(r,l),r.forEach(d),this.h()},h(){e.__value=t=s[5],e.value=e.__value},m(o,r){S(o,e,r),_(e,n)},p(o,r){r&2&&l!==(l=o[5]+"")&&H(n,l),r&2&&t!==(t=o[5])&&(e.__value=t,e.value=e.__value)},d(o){o&&d(e)}}}function Ie(s){let e,l,n=Object.entries(s[1][0]),t=[];for(let r=0;r<n.length;r+=1)t[r]=je(pe(s,n,r));const o=r=>P(t[r],1,1,()=>{t[r]=null});return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=ie()},l(r){for(let a=0;a<t.length;a+=1)t[a].l(r);e=ie()},m(r,a){for(let f=0;f<t.length;f+=1)t[f].m(r,a);S(r,e,a),l=!0},p(r,a){if(a&10){n=Object.entries(r[1][0]);let f;for(f=0;f<n.length;f+=1){const b=pe(r,n,f);t[f]?(t[f].p(b,a),q(t[f],1)):(t[f]=je(b),t[f].c(),q(t[f],1),t[f].m(e.parentNode,e))}for(X(),f=n.length;f<t.length;f+=1)o(f);Z()}},i(r){if(!l){for(let a=0;a<n.length;a+=1)q(t[a]);l=!0}},o(r){t=t.filter(Boolean);for(let a=0;a<t.length;a+=1)P(t[a]);l=!1},d(r){ee(t,r),r&&d(e)}}}function je(s){let e,l,n,t=s[5].name+"",o,r,a,f=s[4]+"",b,p,u,v,c;return u=new te({props:{name:s[4],type:s[5].value,parent:s[3],value:s[5].default}}),{c(){e=$("div"),l=$("div"),n=$("span"),o=B(t),r=D(),a=$("span"),b=B(f),p=D(),R(u.$$.fragment),v=D(),this.h()},l(i){e=E(i,"DIV",{class:!0});var h=y(e);l=E(h,"DIV",{class:!0});var m=y(l);n=E(m,"SPAN",{class:!0});var k=y(n);o=L(k,t),k.forEach(d),r=V(m),a=E(m,"SPAN",{class:!0});var w=y(a);b=L(w,f),w.forEach(d),m.forEach(d),p=V(h),F(u.$$.fragment,h),v=V(h),h.forEach(d),this.h()},h(){g(n,"class","name"),g(a,"class","key"),g(l,"class","flex justify_between"),g(e,"class","form_item inner flex flex_column")},m(i,h){S(i,e,h),_(e,l),_(l,n),_(n,o),_(l,r),_(l,a),_(a,b),_(e,p),J(u,e,null),_(e,v),c=!0},p(i,h){(!c||h&2)&&t!==(t=i[5].name+"")&&H(o,t),(!c||h&2)&&f!==(f=i[4]+"")&&H(b,f);const m={};h&2&&(m.name=i[4]),h&2&&(m.type=i[5].value),h&8&&(m.parent=i[3]),h&2&&(m.value=i[5].default),u.$set(m)},i(i){c||(q(u.$$.fragment,i),c=!0)},o(i){P(u.$$.fragment,i),c=!1},d(i){i&&d(e),M(u)}}}function De(s){let e,l,n=Object.entries(s[1]),t=[];for(let r=0;r<n.length;r+=1)t[r]=Ve(de(s,n,r));const o=r=>P(t[r],1,1,()=>{t[r]=null});return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=ie()},l(r){for(let a=0;a<t.length;a+=1)t[a].l(r);e=ie()},m(r,a){for(let f=0;f<t.length;f+=1)t[f].m(r,a);S(r,e,a),l=!0},p(r,a){if(a&10){n=Object.entries(r[1]);let f;for(f=0;f<n.length;f+=1){const b=de(r,n,f);t[f]?(t[f].p(b,a),q(t[f],1)):(t[f]=Ve(b),t[f].c(),q(t[f],1),t[f].m(e.parentNode,e))}for(X(),f=n.length;f<t.length;f+=1)o(f);Z()}},i(r){if(!l){for(let a=0;a<n.length;a+=1)q(t[a]);l=!0}},o(r){t=t.filter(Boolean);for(let a=0;a<t.length;a+=1)P(t[a]);l=!1},d(r){ee(t,r),r&&d(e)}}}function Ve(s){let e,l,n,t=s[5].name+"",o,r,a,f=s[4]+"",b,p,u,v,c;return u=new te({props:{name:s[4],type:s[5].value,parent:s[3]?s[3]+"."+Object.keys(s[1])[0]:Object.keys(s[1])[0],value:s[5].default}}),{c(){e=$("div"),l=$("div"),n=$("span"),o=B(t),r=D(),a=$("span"),b=B(f),p=D(),R(u.$$.fragment),v=D(),this.h()},l(i){e=E(i,"DIV",{class:!0});var h=y(e);l=E(h,"DIV",{class:!0});var m=y(l);n=E(m,"SPAN",{class:!0});var k=y(n);o=L(k,t),k.forEach(d),r=V(m),a=E(m,"SPAN",{class:!0});var w=y(a);b=L(w,f),w.forEach(d),m.forEach(d),p=V(h),F(u.$$.fragment,h),v=V(h),h.forEach(d),this.h()},h(){g(n,"class","name"),g(a,"class","key"),g(l,"class","flex justify_between"),g(e,"class","form_item inner flex flex_column")},m(i,h){S(i,e,h),_(e,l),_(l,n),_(n,o),_(l,r),_(l,a),_(a,b),_(e,p),J(u,e,null),_(e,v),c=!0},p(i,h){(!c||h&2)&&t!==(t=i[5].name+"")&&H(o,t),(!c||h&2)&&f!==(f=i[4]+"")&&H(b,f);const m={};h&2&&(m.name=i[4]),h&2&&(m.type=i[5].value),h&10&&(m.parent=i[3]?i[3]+"."+Object.keys(i[1])[0]:Object.keys(i[1])[0]),h&2&&(m.value=i[5].default),u.$set(m)},i(i){c||(q(u.$$.fragment,i),c=!0)},o(i){P(u.$$.fragment,i),c=!1},d(i){i&&d(e),M(u)}}}function Fe(s){let e,l,n,t,o,r=Array.isArray(s[1])&&typeof s[1][0]=="string",a,f=Array.isArray(s[1])&&typeof s[1][0]=="object",b,p=!Array.isArray(s[1])&&typeof s[1]=="object",u,v=s[1]==="string"&&be(s),c=s[1]==="password"&&$e(s),i=s[1]==="number"&&Ee(s),h=s[1]==="boolean"&&ye(s),m=r&&we(s),k=f&&Ie(s),w=p&&De(s);return{c(){e=$("div"),v&&v.c(),l=D(),c&&c.c(),n=D(),i&&i.c(),t=D(),h&&h.c(),o=D(),m&&m.c(),a=D(),k&&k.c(),b=D(),w&&w.c(),this.h()},l(A){e=E(A,"DIV",{class:!0});var O=y(e);v&&v.l(O),l=V(O),c&&c.l(O),n=V(O),i&&i.l(O),t=V(O),h&&h.l(O),o=V(O),m&&m.l(O),a=V(O),k&&k.l(O),b=V(O),w&&w.l(O),O.forEach(d),this.h()},h(){g(e,"class","value svelte-1xmjqyn")},m(A,O){S(A,e,O),v&&v.m(e,null),_(e,l),c&&c.m(e,null),_(e,n),i&&i.m(e,null),_(e,t),h&&h.m(e,null),_(e,o),m&&m.m(e,null),_(e,a),k&&k.m(e,null),_(e,b),w&&w.m(e,null),u=!0},p(A,[O]){A[1]==="string"?v?v.p(A,O):(v=be(A),v.c(),v.m(e,l)):v&&(v.d(1),v=null),A[1]==="password"?c?c.p(A,O):(c=$e(A),c.c(),c.m(e,n)):c&&(c.d(1),c=null),A[1]==="number"?i?i.p(A,O):(i=Ee(A),i.c(),i.m(e,t)):i&&(i.d(1),i=null),A[1]==="boolean"?h?h.p(A,O):(h=ye(A),h.c(),h.m(e,o)):h&&(h.d(1),h=null),O&2&&(r=Array.isArray(A[1])&&typeof A[1][0]=="string"),r?m?m.p(A,O):(m=we(A),m.c(),m.m(e,a)):m&&(m.d(1),m=null),O&2&&(f=Array.isArray(A[1])&&typeof A[1][0]=="object"),f?k?(k.p(A,O),O&2&&q(k,1)):(k=Ie(A),k.c(),q(k,1),k.m(e,b)):k&&(X(),P(k,1,1,()=>{k=null}),Z()),O&2&&(p=!Array.isArray(A[1])&&typeof A[1]=="object"),p?w?(w.p(A,O),O&2&&q(w,1)):(w=De(A),w.c(),q(w,1),w.m(e,null)):w&&(X(),P(w,1,1,()=>{w=null}),Z())},i(A){u||(q(k),q(w),u=!0)},o(A){P(k),P(w),u=!1},d(A){A&&d(e),v&&v.d(),c&&c.d(),i&&i.d(),h&&h.d(),m&&m.d(),k&&k.d(),w&&w.d()}}}function Je(s,e,l){let{name:n}=e,{type:t}=e,{value:o}=e,{parent:r=void 0}=e;return s.$$set=a=>{"name"in a&&l(0,n=a.name),"type"in a&&l(1,t=a.type),"value"in a&&l(2,o=a.value),"parent"in a&&l(3,r=a.parent)},[n,t,o,r]}class te extends G{constructor(e){super(),K(this,e,Je,Fe,Q,{name:0,type:1,value:2,parent:3})}}function Oe(s,e,l){const n=s.slice();return n[8]=e[l][0],n[9]=e[l][1],n}function Ae(s,e,l){const n=s.slice();return n[8]=e[l][0],n[9]=e[l][1],n}function Ne(s){let e,l,n,t=s[9].name+"",o,r,a,f=s[8]+"",b,p,u,v;return u=new te({props:{name:s[8],type:s[9].value,value:s[9].default}}),{c(){e=$("div"),l=$("div"),n=$("span"),o=B(t),r=D(),a=$("span"),b=B(f),p=D(),R(u.$$.fragment),this.h()},l(c){e=E(c,"DIV",{class:!0});var i=y(e);l=E(i,"DIV",{class:!0});var h=y(l);n=E(h,"SPAN",{class:!0});var m=y(n);o=L(m,t),m.forEach(d),r=V(h),a=E(h,"SPAN",{class:!0});var k=y(a);b=L(k,f),k.forEach(d),h.forEach(d),p=V(i),F(u.$$.fragment,i),i.forEach(d),this.h()},h(){g(n,"class","name"),g(a,"class","key"),g(l,"class","flex justify_between"),g(e,"class","form_item flex flex_column")},m(c,i){S(c,e,i),_(e,l),_(l,n),_(n,o),_(l,r),_(l,a),_(a,b),_(e,p),J(u,e,null),v=!0},p:C,i(c){v||(q(u.$$.fragment,c),v=!0)},o(c){P(u.$$.fragment,c),v=!1},d(c){c&&d(e),M(u)}}}function qe(s){let e,l,n,t=s[9].name+"",o,r,a,f=s[8]+"",b,p,u,v;return u=new te({props:{name:s[8],type:s[9].value,parent:"option",value:s[9].default}}),{c(){e=$("div"),l=$("div"),n=$("span"),o=B(t),r=D(),a=$("span"),b=B(f),p=D(),R(u.$$.fragment),this.h()},l(c){e=E(c,"DIV",{class:!0});var i=y(e);l=E(i,"DIV",{class:!0});var h=y(l);n=E(h,"SPAN",{class:!0});var m=y(n);o=L(m,t),m.forEach(d),r=V(h),a=E(h,"SPAN",{class:!0});var k=y(a);b=L(k,f),k.forEach(d),h.forEach(d),p=V(i),F(u.$$.fragment,i),i.forEach(d),this.h()},h(){g(n,"class","name"),g(a,"class","key"),g(l,"class","flex justify_between"),g(e,"class","form_item flex flex_column")},m(c,i){S(c,e,i),_(e,l),_(l,n),_(n,o),_(l,r),_(l,a),_(a,b),_(e,p),J(u,e,null),v=!0},p(c,i){(!v||i&1)&&t!==(t=c[9].name+"")&&H(o,t),(!v||i&1)&&f!==(f=c[8]+"")&&H(b,f);const h={};i&1&&(h.name=c[8]),i&1&&(h.type=c[9].value),i&1&&(h.value=c[9].default),u.$set(h)},i(c){v||(q(u.$$.fragment,c),v=!0)},o(c){P(u.$$.fragment,c),v=!1},d(c){c&&d(e),M(u)}}}function Me(s){let e,l;return{c(){e=$("i"),l=B("测试连接"),this.h()},l(n){e=E(n,"I",{class:!0}),y(e).forEach(d),l=L(n,"测试连接"),this.h()},h(){g(e,"class","icon-wifi mr_6")},m(n,t){S(n,e,t),S(n,l,t)},d(n){n&&d(e),n&&d(l)}}}function Ye(s){let e,l,n,t,o,r,a,f,b;return{c(){e=$("div"),l=$("div"),n=D(),t=$("div"),o=D(),r=$("div"),a=D(),f=$("div"),b=B(`
                  测试连接中`),this.h()},l(p){e=E(p,"DIV",{class:!0});var u=y(e);l=E(u,"DIV",{}),y(l).forEach(d),n=V(u),t=E(u,"DIV",{}),y(t).forEach(d),o=V(u),r=E(u,"DIV",{}),y(r).forEach(d),a=V(u),f=E(u,"DIV",{}),y(f).forEach(d),u.forEach(d),b=L(p,`
                  测试连接中`),this.h()},h(){g(e,"class","lds-ring small mr_6")},m(p,u){S(p,e,u),_(e,l),_(e,n),_(e,t),_(e,o),_(e,r),_(e,a),_(e,f),S(p,b,u)},d(p){p&&d(e),p&&d(b)}}}function Se(s){let e,l;return{c(){e=$("div"),l=B(s[1]),this.h()},l(n){e=E(n,"DIV",{class:!0});var t=y(e);l=L(t,s[1]),t.forEach(d),this.h()},h(){g(e,"class","info")},m(n,t){S(n,e,t),_(e,l)},p(n,t){t&2&&H(l,n[1])},d(n){n&&d(e)}}}function ze(s){let e,l,n,t,o,r,a,f,b,p,u,v,c,i,h,m,k=Object.entries(me),w=[];for(let I=0;I<k.length;I+=1)w[I]=Ne(Ae(s,k,I));const A=I=>P(w[I],1,1,()=>{w[I]=null});let O=Object.entries(ve[s[0]]),T=[];for(let I=0;I<O.length;I+=1)T[I]=qe(Oe(s,O,I));const Ue=I=>P(T[I],1,1,()=>{T[I]=null});function oe(I,N){return I[2]?Ye:Me}let le=oe(s),Y=le(s),U=s[1]&&Se(s);return{c(){e=$("form");for(let I=0;I<w.length;I+=1)w[I].c();l=D();for(let I=0;I<T.length;I+=1)T[I].c();n=D(),t=$("div"),o=$("button"),Y.c(),r=D(),a=$("div"),f=$("button"),b=$("i"),p=D(),u=$("button"),v=$("i"),c=D(),U&&U.c(),this.h()},l(I){e=E(I,"FORM",{id:!0,class:!0});var N=y(e);for(let W=0;W<w.length;W+=1)w[W].l(N);l=V(N);for(let W=0;W<T.length;W+=1)T[W].l(N);n=V(N),t=E(N,"DIV",{class:!0});var j=y(t);o=E(j,"BUTTON",{class:!0});var z=y(o);Y.l(z),z.forEach(d),r=V(j),a=E(j,"DIV",{class:!0});var ne=y(a);f=E(ne,"BUTTON",{class:!0});var fe=y(f);b=E(fe,"I",{class:!0}),y(b).forEach(d),fe.forEach(d),p=V(ne),u=E(ne,"BUTTON",{class:!0});var ce=y(u);v=E(ce,"I",{class:!0}),y(v).forEach(d),ce.forEach(d),ne.forEach(d),j.forEach(d),c=V(N),U&&U.l(N),N.forEach(d),this.h()},h(){g(o,"class","btn_test btn_action cursor_point flex justify_center align_center"),g(b,"class","icon-chevron-left"),g(f,"class","btn_back btn_action cursor_point mr_12"),g(v,"class","icon-check"),g(u,"class","btn_save btn_action cursor_point"),g(a,"class","flex"),g(t,"class","w_100 flex justify_between"),g(e,"id","form_db"),g(e,"class","form flex_column")},m(I,N){S(I,e,N);for(let j=0;j<w.length;j+=1)w[j].m(e,null);_(e,l);for(let j=0;j<T.length;j+=1)T[j].m(e,null);_(e,n),_(e,t),_(t,o),Y.m(o,null),_(t,r),_(t,a),_(a,f),_(f,b),_(a,p),_(a,u),_(u,v),_(e,c),U&&U.m(e,null),i=!0,h||(m=[re(o,"click",s[4]),re(f,"click",s[3]),re(u,"click",s[5])],h=!0)},p(I,[N]){if(N&0){k=Object.entries(me);let j;for(j=0;j<k.length;j+=1){const z=Ae(I,k,j);w[j]?(w[j].p(z,N),q(w[j],1)):(w[j]=Ne(z),w[j].c(),q(w[j],1),w[j].m(e,l))}for(X(),j=k.length;j<w.length;j+=1)A(j);Z()}if(N&1){O=Object.entries(ve[I[0]]);let j;for(j=0;j<O.length;j+=1){const z=Oe(I,O,j);T[j]?(T[j].p(z,N),q(T[j],1)):(T[j]=qe(z),T[j].c(),q(T[j],1),T[j].m(e,n))}for(X(),j=O.length;j<T.length;j+=1)Ue(j);Z()}le!==(le=oe(I))&&(Y.d(1),Y=le(I),Y&&(Y.c(),Y.m(o,null))),I[1]?U?U.p(I,N):(U=Se(I),U.c(),U.m(e,null)):U&&(U.d(1),U=null)},i(I){if(!i){for(let N=0;N<k.length;N+=1)q(w[N]);for(let N=0;N<O.length;N+=1)q(T[N]);i=!0}},o(I){w=w.filter(Boolean);for(let N=0;N<w.length;N+=1)P(w[N]);T=T.filter(Boolean);for(let N=0;N<T.length;N+=1)P(T[N]);i=!1},d(I){I&&d(e),ee(w,I),ee(T,I),Y.d(),U&&U.d(),h=!1,Ce(m)}}}function He(s,e,l){let n="sqlite",t="",o=!1;const r=u=>{l(0,n=se(u).type)},a=u=>{u.preventDefault()};return Be(()=>{const u=document.getElementById("form_db");return u.addEventListener("change",()=>r(u)),u.addEventListener("submit",v=>a(v)),()=>{u.removeEventListener("change",v=>r(u)),u.removeEventListener("submit",v=>a(v))}}),[n,t,o,()=>x.update(u=>u-1),async()=>{const u=document.getElementById("form_db");if(!u.checkValidity())return;l(2,o=!0);const v=await fetch(_e.check,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(se(u))});if(l(2,o=!1),v.status!==200){const c=await v.json().catch(()=>{});l(1,t=`测试连接失败，失败原因:${(c==null?void 0:c.message)||"无"}`);return}l(1,t="测试连接成功!")},async()=>{const u=document.getElementById("form_env"),v=document.getElementById("form_db");if(!v.checkValidity())return;x.set(3);const c=await fetch(_e.setup,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({env:se(u),db:se(v)})}),i=await c.json().catch(()=>{});if(c.status!==200){l(1,t=`配置失败，失败原因:${(i==null?void 0:i.message)||"无"}`),x.set(2);return}l(1,t="配置成功! 3秒后进入管理后台"),i.urls&&window.setTimeout(()=>{window.location.href=`http://${window.location.hostname}:${i.port}/${i.root}/`},3e3)}]}class Ge extends G{constructor(e){super(),K(this,e,He,ze,Q,{})}}function Pe(s,e,l){const n=s.slice();return n[2]=e[l][0],n[3]=e[l][1],n}function Te(s){let e,l,n,t=s[3].name+"",o,r,a,f=s[2]+"",b,p,u,v;return u=new te({props:{name:s[2],type:s[3].value,value:s[3].default}}),{c(){e=$("div"),l=$("div"),n=$("span"),o=B(t),r=D(),a=$("span"),b=B(f),p=D(),R(u.$$.fragment),this.h()},l(c){e=E(c,"DIV",{class:!0});var i=y(e);l=E(i,"DIV",{class:!0});var h=y(l);n=E(h,"SPAN",{class:!0});var m=y(n);o=L(m,t),m.forEach(d),r=V(h),a=E(h,"SPAN",{class:!0});var k=y(a);b=L(k,f),k.forEach(d),h.forEach(d),p=V(i),F(u.$$.fragment,i),i.forEach(d),this.h()},h(){g(n,"class","name"),g(a,"class","key"),g(l,"class","flex justify_between"),g(e,"class","form_item flex flex_column")},m(c,i){S(c,e,i),_(e,l),_(l,n),_(n,o),_(l,r),_(l,a),_(a,b),_(e,p),J(u,e,null),v=!0},p:C,i(c){v||(q(u.$$.fragment,c),v=!0)},o(c){P(u.$$.fragment,c),v=!1},d(c){c&&d(e),M(u)}}}function Ke(s){let e,l,n,t,o,r,a,f,b=Object.entries(he),p=[];for(let v=0;v<b.length;v+=1)p[v]=Te(Pe(s,b,v));const u=v=>P(p[v],1,1,()=>{p[v]=null});return{c(){e=$("form");for(let v=0;v<p.length;v+=1)p[v].c();l=D(),n=$("div"),t=$("button"),o=$("i"),this.h()},l(v){e=E(v,"FORM",{id:!0,class:!0});var c=y(e);for(let m=0;m<p.length;m+=1)p[m].l(c);l=V(c),n=E(c,"DIV",{class:!0});var i=y(n);t=E(i,"BUTTON",{class:!0});var h=y(t);o=E(h,"I",{class:!0}),y(o).forEach(d),h.forEach(d),i.forEach(d),c.forEach(d),this.h()},h(){g(o,"class","icon-chevron-right"),g(t,"class","btn_next btn_action cursor_point"),g(n,"class","w_100 flex justify_center"),g(e,"id","form_env"),g(e,"class","form flex_column")},m(v,c){S(v,e,c);for(let i=0;i<p.length;i+=1)p[i].m(e,null);_(e,l),_(e,n),_(n,t),_(t,o),r=!0,a||(f=re(t,"click",s[0]),a=!0)},p(v,[c]){if(c&0){b=Object.entries(he);let i;for(i=0;i<b.length;i+=1){const h=Pe(v,b,i);p[i]?(p[i].p(h,c),q(p[i],1)):(p[i]=Te(h),p[i].c(),q(p[i],1),p[i].m(e,l))}for(X(),i=b.length;i<p.length;i+=1)u(i);Z()}},i(v){if(!r){for(let c=0;c<b.length;c+=1)q(p[c]);r=!0}},o(v){p=p.filter(Boolean);for(let c=0;c<p.length;c+=1)P(p[c]);r=!1},d(v){v&&d(e),ee(p,v),a=!1,f()}}}function Qe(s){const e=n=>{n.preventDefault()};return Be(()=>{const n=document.getElementById("form_env");return n.addEventListener("submit",t=>e(t)),()=>{n.removeEventListener("submit",t=>e(t))}}),[()=>{document.getElementById("form_env").checkValidity()&&x.set(2)}]}class We extends G{constructor(e){super(),K(this,e,Qe,Ke,Q,{})}}function Xe(s){let e,l;return{c(){e=$("header"),l=B("安装配置"),this.h()},l(n){e=E(n,"HEADER",{class:!0});var t=y(e);l=L(t,"安装配置"),t.forEach(d),this.h()},h(){g(e,"class","header_wrap flex justify_center svelte-1doqyty")},m(n,t){S(n,e,t),_(e,l)},p:C,i:C,o:C,d(n){n&&d(e)}}}class Ze extends G{constructor(e){super(),K(this,e,null,Xe,Q,{})}}function xe(s){let e,l,n,t,o,r,a,f,b,p,u,v;return{c(){e=$("div"),l=$("div"),n=$("div"),t=D(),o=$("div"),r=D(),a=$("div"),f=D(),b=$("div"),p=D(),u=$("span"),v=B("后台配置中"),this.h()},l(c){e=E(c,"DIV",{class:!0});var i=y(e);l=E(i,"DIV",{class:!0});var h=y(l);n=E(h,"DIV",{}),y(n).forEach(d),t=V(h),o=E(h,"DIV",{}),y(o).forEach(d),r=V(h),a=E(h,"DIV",{}),y(a).forEach(d),f=V(h),b=E(h,"DIV",{}),y(b).forEach(d),h.forEach(d),p=V(i),u=E(i,"SPAN",{class:!0});var m=y(u);v=L(m,"后台配置中"),m.forEach(d),i.forEach(d),this.h()},h(){g(l,"class","lds-ring"),g(u,"class","mt_20"),g(e,"class","loading_wrap flex_column justify_center align_center svelte-1m3rhlt")},m(c,i){S(c,e,i),_(e,l),_(l,n),_(l,t),_(l,o),_(l,r),_(l,a),_(l,f),_(l,b),_(e,p),_(e,u),_(u,v)},p:C,i:C,o:C,d(c){c&&d(e)}}}class et extends G{constructor(e){super(),K(this,e,null,xe,Q,{})}}function tt(s){let e,l,n,t,o;return{c(){e=$("div"),l=$("i"),n=D(),t=$("span"),o=B("配置成功"),this.h()},l(r){e=E(r,"DIV",{class:!0});var a=y(e);l=E(a,"I",{class:!0}),y(l).forEach(d),n=V(a),t=E(a,"SPAN",{class:!0});var f=y(t);o=L(f,"配置成功"),f.forEach(d),a.forEach(d),this.h()},h(){g(l,"class","icon-check-circle svelte-6ewzn5"),g(t,"class","mt_12"),g(e,"class","success_wrap flex_column justify_center align_center svelte-6ewzn5")},m(r,a){S(r,e,a),_(e,l),_(e,n),_(e,t),_(t,o)},p:C,i:C,o:C,d(r){r&&d(e)}}}class lt extends G{constructor(e){super(),K(this,e,null,tt,Q,{})}}function nt(s){let e,l,n,t,o,r,a,f,b;return{c(){e=$("div"),l=$("div"),n=$("div"),t=$("span"),o=B("服务配置"),r=D(),a=$("div"),f=$("span"),b=B("数据库配置"),this.h()},l(p){e=E(p,"DIV",{class:!0});var u=y(e);l=E(u,"DIV",{class:!0});var v=y(l);n=E(v,"DIV",{class:!0});var c=y(n);t=E(c,"SPAN",{class:!0});var i=y(t);o=L(i,"服务配置"),i.forEach(d),c.forEach(d),r=V(v),a=E(v,"DIV",{class:!0});var h=y(a);f=E(h,"SPAN",{class:!0});var m=y(f);b=L(m,"数据库配置"),m.forEach(d),h.forEach(d),v.forEach(d),u.forEach(d),this.h()},h(){g(t,"class","text"),g(n,"class","tab_item flex justify_center align_center cursor_point transition_normal svelte-17hcqqw"),ae(n,"active",s[0]>=1),g(f,"class","text"),g(a,"class","tab_item flex justify_center align_center cursor_point transition_normal svelte-17hcqqw"),ae(a,"active",s[0]>=2),g(l,"class","tabs_items flex svelte-17hcqqw"),g(e,"class","tabs_wrap flex justify_center svelte-17hcqqw")},m(p,u){S(p,e,u),_(e,l),_(l,n),_(n,t),_(t,o),_(l,r),_(l,a),_(a,f),_(f,b)},p(p,[u]){u&1&&ae(n,"active",p[0]>=1),u&1&&ae(a,"active",p[0]>=2)},i:C,o:C,d(p){p&&d(e)}}}function at(s,e,l){let n;return Le(s,x,t=>l(0,n=t)),[n]}class st extends G{constructor(e){super(),K(this,e,at,nt,Q,{})}}function rt(s){let e,l,n,t,o,r,a,f,b,p,u,v,c,i,h;return e=new Ze({}),n=new st({}),a=new We({}),b=new Ge({}),u=new et({}),c=new lt({}),{c(){R(e.$$.fragment),l=D(),R(n.$$.fragment),t=D(),o=$("div"),r=$("div"),R(a.$$.fragment),f=D(),R(b.$$.fragment),p=D(),R(u.$$.fragment),v=D(),R(c.$$.fragment),this.h()},l(m){F(e.$$.fragment,m),l=V(m),F(n.$$.fragment,m),t=V(m),o=E(m,"DIV",{class:!0});var k=y(o);r=E(k,"DIV",{class:!0,style:!0});var w=y(r);F(a.$$.fragment,w),f=V(w),F(b.$$.fragment,w),p=V(w),F(u.$$.fragment,w),v=V(w),F(c.$$.fragment,w),w.forEach(d),k.forEach(d),this.h()},h(){g(r,"class",i="content transition_normal step_"+s[0]),ue(r,"transform","translate(calc(-"+(s[0]-1)+" * (var(--content_width) + 3px)))"),g(o,"class","content_wrap")},m(m,k){J(e,m,k),S(m,l,k),J(n,m,k),S(m,t,k),S(m,o,k),_(o,r),J(a,r,null),_(r,f),J(b,r,null),_(r,p),J(u,r,null),_(r,v),J(c,r,null),h=!0},p(m,[k]){(!h||k&1&&i!==(i="content transition_normal step_"+m[0]))&&g(r,"class",i),(!h||k&1)&&ue(r,"transform","translate(calc(-"+(m[0]-1)+" * (var(--content_width) + 3px)))")},i(m){h||(q(e.$$.fragment,m),q(n.$$.fragment,m),q(a.$$.fragment,m),q(b.$$.fragment,m),q(u.$$.fragment,m),q(c.$$.fragment,m),h=!0)},o(m){P(e.$$.fragment,m),P(n.$$.fragment,m),P(a.$$.fragment,m),P(b.$$.fragment,m),P(u.$$.fragment,m),P(c.$$.fragment,m),h=!1},d(m){M(e,m),m&&d(l),M(n,m),m&&d(t),m&&d(o),M(a),M(b),M(u),M(c)}}}function it(s,e,l){let n;return Le(s,x,t=>l(0,n=t)),[n]}class ct extends G{constructor(e){super(),K(this,e,it,rt,Q,{})}}export{ct as default};
